@page
@model Admin.Endpoint.Pages.CatalogItems.IndexModel
@{
}


<div class="content-wrapper">
    <div class="container-fluid">
        <!-- Zero configuration table -->
        <section id="configuration">
            <div class="row">
                <div class="col-12">
                    <div class="card">

                        <div class="card-body collapse show">
                            <div class="card-block card-dashboard">
                                <p class="card-text">لیست کاتالوگ ها</p>
                                <div id="DataTables_Table_0_wrapper" class="dataTables_wrapper container-fluid dt-bootstrap4">
                                    <div class="col-sm-12">
                                        <table class="table table-striped table-bordered zero-configuration dataTable" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info">
                                            <thead>
                                            <tr role="row">
                                                <th class="sorting_asc">شناسه</th>
                                                <th class="sorting_asc">نام</th>
                                                <th class="sorting_asc">دسته بندی</th>
                                                <th class="sorting_asc">برند </th>
                                                <th class="sorting_asc">قیمت </th>
                                                <th class="sorting_asc">موجودی </th>
                                                <th class="sorting_asc"> حداقل برای سفارش مجدد </th>
                                                <th class="sorting_asc"> حداکثر موجودی</th>
                                                <th class="sorting_asc"> </th>
                                            </tr>
                                            </thead>
                                            <tbody id="tblCatalogItems" >

                                            @foreach (var item in Model.CatalogItemsDto.Data)
                                            {
                                               <tr role="row">
                                                    <td id="CatalogItemId" >@item.Id</td>
                                                    <td>@item.Name</td>
                                                    <td>@item.Type</td>
                                                    <td>@item.Brand</td>
                                                    <td>@item.Price.ToString("n0")</td>
                                                    <td>@item.AvailableStock</td>
                                                    <td>@item.RestockThreshold</td>
                                                    <td>@item.MaxStockThreshold</td>
                                                    <td>
                                                        <a asp-page="Detail" class="btn btn-info"> جزئیات</a>
                                                        <a href="/CatalogItems/Edite/@item.Id" class="btn btn-warning">ویرایش</a>
                                                        <a href="/CatalogItems/Delete/@item.Id"
                                                          class=" btn btn-danger">حذف</a>
                                                        @*data-target="#fadeinModal"  data-toggle="modal"*@
                                                    </td>
                                                </tr>
                                            }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>


@*    <div id="fadeinModal" class="modal fade out right" tabindex="-1" role="dialog">
         <div class="modal-dialog modal-lg modal-notify modal-info" role="document">
             <div class="modal-content">
                 <div class="modal-header modalH">
                     حذف محصول
                     <button type="button" class="close" style="color:white;" data-dismiss="modal" aria-label="Close">
                         <span aria-hidden="true">&times;</span>
                     </button>
                 </div>
            
                 <div id="bodymodal" class="modal-body">
                     <p class="modal-text">  از حذف محصول اطمینان دارید ؟</p>
                 </div>
                 <div class="modal-footer">

                     <form >
                         <button class="btn" data-dismiss="modal"><i class="flaticon-cancel-12"></i> نادیده گرفتن</button>
                         <button type="button" id="deleteBtn" onclick="sendDataDelete()" class="btn btn-danger">حذف کن</button>
                     </form>
                 </div>
             </div>
         </div>
     </div>*@

</div>

 @section Scripts {

     <link href="~/Sweetalert2/sweetalert2.min.css" rel="stylesheet"/>
     <script src="~/Sweetalert2/sweetalert2.min.js"></script>

 }
@*
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>

        var id;
        function onGetModalT() {
            $("#tblCatalogItems").on('click', '.btn-delete', function() {
                id = $(this).closest('tr').getElementById("CatalogItemId").value();
            });
        }

        function sendDataDelete() {
         
            var ajaxRequest = $.ajax({
                type: "GET",
                url: "/catalogitems/delete",
                contentType: false,
                processData: false,
                data: Id,
                success: function(data) {
                    if (data.isSucces == true) {
                        swal.fire(
                            'موفق!',
                            'کاتالوگ با موفقیت حذف شد',
                            'warning'
                        ).then(function(isConfirm) {
                            window.location.href = "/catalogitems";
                        });
                    } else {
                        swal.fire(
                            'هشدار!',
                            "دیتا حذف نشد",
                            'error'
                        );
                    }
                },
                error: function(xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                    alert(thrownError);
                }
            });
        }
    </script>*@
